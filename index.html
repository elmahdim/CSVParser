<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link rel="stylesheet" href="https://bootswatch.com/flatly/bootstrap.min.css">
</head>
<body>
    <div class="container-fluid">
        <br>
        <input type="file" id="inputCSV" accept=".csv">
        <hr>
        <table class="table table-striped table-bordered" id="outputCSV">
            <thead>&nbsp;</thead>
            <tbody>&nbsp;</tbody>
        </table>
    </div>
    <script type="text/javascript">
        var $inputCSV  = document.getElementById("inputCSV");
        var $tbody     = document.querySelector("#outputCSV tbody");
        var $thead     = document.querySelector("#outputCSV thead");
        var options    = [
            {
                label: "Choose",
                val: 0
            },
            {
                label: "Pickup",
                val: 1
            },
            {
                label: "Drop-off",
                val: 2
            },
            {
                label: "Load",
                val: 3
            },
            {
                label: "Weight",
                val: 4
            },
            {
                label: "Distance",
                val: 5
            },
            {
                label: "Reference #",
                val: 6
            }
        ];

        $inputCSV.addEventListener('change', fileHandler, false);
        function fileHandler() {
          $tbody.innerHTML = '';
          $thead.innerHTML = '';
          if (typeof (FileReader) != "undefined") {
            var totalCols = 0;
            var reader = new FileReader();
            reader.onload = function (e) {
                rows = e.target.result.split("\n");
                rows.shift();
                for (var i = 0; i < rows.filter(Boolean).length; i++) {
                    var row = $tbody.insertRow(-1);
                    var cells = rows[i].split(",");
                    totalCols = cells.length;
                    for (var j = 0; j < cells.length; j++) {
                        var cell = row.insertCell(-1);
                        cell.innerHTML = cells[j];
                    }
                }
                var theadRow = $thead.insertRow(0);
                for (var tr = 0; tr < totalCols; tr++) {
                    var theadCell = theadRow.insertCell(0);
                    generateSelect(theadCell);
                }
            }
            reader.readAsText(this.files[0]);
          } else {
            console.warn("This browser does not support HTML5.");
          }
        };
        
        function generateSelect(target) {
            var selectList = document.createElement("select");
            selectList.className = 'form-control';
            target.appendChild(selectList);

            for (var i = 0; i < options.length; i++) {
                var option = document.createElement("option");
                option.value = options[i].val;
                option.text = options[i].label;
                selectList.appendChild(option);
            }
        }
    </script>
</body>
</html>